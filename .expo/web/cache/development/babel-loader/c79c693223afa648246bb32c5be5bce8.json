{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport firebase from 'firebase';\nimport CircleButton from \"../components/CircleButton\";\nimport Datetime from \"../components/Datetime\";\nimport TableTitle from \"../components/TableTitle\";\nimport CreateData from \"../components/CreateData\";\nimport LogOutButton from \"../components/LogOutButton\";\nimport Loading from \"../components/Loading\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar date = new Date();\nvar year = date.getFullYear();\nvar month = date.getMonth() + 1;\nvar day = date.getDate();\nexport default function BabyTodayScreen(props) {\n  var navigation = props.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      memos = _useState2[0],\n      setMemos = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return _jsx(LogOutButton, {});\n      }\n    });\n  }, []);\n  useEffect(function () {\n    var db = firebase.firestore();\n\n    var _firebase$auth = firebase.auth(),\n        currentUser = _firebase$auth.currentUser;\n\n    var unsubscribe = function unsubscribe() {};\n\n    if (currentUser) {\n      setLoading(true);\n      var ref = db.collection(\"users/\" + currentUser.uid + \"/\" + year + \"/\" + month + \"/\" + day).orderBy('updatedAt', 'asc');\n      unsubscribe = ref.onSnapshot(function (snapshot) {\n        var userMemos = [];\n        snapshot.forEach(function (doc) {\n          console.log(doc.id, doc.data());\n          var data = doc.data();\n          userMemos.push({\n            id: doc.id,\n            timeLeft: data.timeLeft,\n            timeRight: data.timeRight,\n            bodyText: data.bodyText,\n            updatedAt: data.updatedAt.toDate()\n          });\n        });\n        setMemos(userMemos);\n        setLoading(false);\n      }, function (error) {\n        console.log(error);\n        setLoading(false);\n        Alert.alert('データの読み込みに失敗しました。');\n      });\n    }\n\n    return unsubscribe;\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Loading, {\n      isLoading: isLoading\n    }), _jsx(View, {\n      style: {\n        height: '15%'\n      },\n      children: _jsx(Datetime, {\n        style: styles.dateTime\n      })\n    }), _jsx(View, {\n      style: {\n        height: '7%'\n      },\n      children: _jsxs(View, {\n        style: styles.tableTitle,\n        children: [_jsx(TableTitle, {\n          title: \"\\u6642\\u9593\"\n        }), _jsx(TableTitle, {\n          title: \"\\u7A2E\\u985E\"\n        }), _jsx(TableTitle, {\n          title: \"\\u8A18\\u9332\"\n        }), _jsx(TableTitle, {\n          title: \"\\u30E1\\u30E2\"\n        }), _jsx(TableTitle, {\n          title: '修正\\n確認'\n        })]\n      })\n    }), _jsx(View, {\n      style: {\n        height: '53%'\n      },\n      children: _jsx(CreateData, {\n        memos: memos\n      })\n    }), _jsxs(View, {\n      style: styles.footer,\n      children: [_jsx(View, {\n        style: styles.advertisement,\n        children: _jsx(Image, {\n          style: {\n            width: '95%',\n            height: '100%'\n          },\n          resizeMode: \"contain\",\n          source: require(\"../img/IMG_2417.jpg\")\n        })\n      }), _jsx(View, {\n        style: styles.menu,\n        children: _jsx(TouchableOpacity, {\n          style: styles.MonthButton,\n          onPress: function onPress() {\n            navigation.navigate('BabyMonth');\n          },\n          children: _jsx(Text, {\n            style: styles.MonthButtonText,\n            children: \"\\u6708\\u8868\\u793A\"\n          })\n        })\n      })]\n    }), _jsx(CircleButton, {\n      name: \"plus\",\n      onPress: function onPress() {\n        navigation.navigate('Create');\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#F0F4F8'\n  },\n  footer: {\n    height: '25%',\n    width: '100%',\n    position: 'absolute',\n    bottom: 0,\n    borderTopWidth: 1,\n    borderTopColor: 'rgba(0, 0, 0, 100)'\n  },\n  dateTime: {\n    textAlign: 'center',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 'auto',\n    marginBottom: 'auto'\n  },\n  tableTitle: {\n    flexDirection: 'row'\n  },\n  advertisement: {\n    height: '40%',\n    alignItems: 'center',\n    backgroundColor: '#ffffff'\n  },\n  menu: {\n    height: '60%',\n    backgroundColor: '#ffffff'\n  },\n  MonthButtonText: {\n    fontSize: 20\n  },\n  MonthButton: {\n    backgroundColor: '#FFDB59',\n    width: 100,\n    height: 44,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'absolute',\n    left: 20,\n    bottom: 50,\n    shadowColor: '#000000',\n    shadowOffset: {\n      width: 0,\n      height: 8\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 8,\n    elevation: 8\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","firebase","CircleButton","Datetime","TableTitle","CreateData","LogOutButton","Loading","date","Date","year","getFullYear","month","getMonth","day","getDate","BabyTodayScreen","props","navigation","memos","setMemos","isLoading","setLoading","setOptions","headerRight","db","firestore","auth","currentUser","unsubscribe","ref","collection","uid","orderBy","onSnapshot","snapshot","userMemos","forEach","doc","console","log","id","data","push","timeLeft","timeRight","bodyText","updatedAt","toDate","error","Alert","alert","styles","container","height","dateTime","tableTitle","footer","advertisement","width","require","menu","MonthButton","navigate","MonthButtonText","StyleSheet","create","flex","backgroundColor","position","bottom","borderTopWidth","borderTopColor","textAlign","justifyContent","alignItems","marginTop","marginBottom","flexDirection","fontSize","borderRadius","left","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["/Users/atsushi/Dev/baby/src/screens/BabyTodayScreen.jsx"],"sourcesContent":["import React, { useEffect, useState }  from 'react';\nimport { View, Text, StyleSheet, Alert, Image, TouchableOpacity } from 'react-native';\nimport firebase from 'firebase';\n\nimport CircleButton from '../components/CircleButton';\nimport Datetime from '../components/Datetime';\nimport TableTitle from '../components/TableTitle';\nimport CreateData from '../components/CreateData';\nimport LogOutButton from '../components/LogOutButton';\nimport Loading from '../components/Loading';\n\nconst date = new Date();\nconst year = date.getFullYear();\nconst month = date.getMonth() + 1;\nconst day = date.getDate();\n\nexport default function BabyTodayScreen(props) {\n    const { navigation } = props;\n    const [memos, setMemos] = useState([]);\n    const [isLoading, setLoading] = useState(false);\n    \n    useEffect(() => {\n        navigation.setOptions({\n            headerRight: () => <LogOutButton />,\n        });\n    }, []);\n\n    useEffect(() => {\n        const db =firebase.firestore();\n        const { currentUser } = firebase.auth();\n    \n        let unsubscribe = () => {};\n        if (currentUser) {\n            setLoading(true);\n            const ref = db.collection(`users/${currentUser.uid}/${year}/${month}/${day}`).orderBy('updatedAt', 'asc');\n            unsubscribe = ref.onSnapshot((snapshot) => {\n                const userMemos = [];\n                    snapshot.forEach((doc) => {\n                        console.log(doc.id, doc.data());\n                        const data = doc.data();\n                        userMemos.push({\n                            id: doc.id,\n                            timeLeft: data.timeLeft,\n                            timeRight: data.timeRight,\n                            bodyText: data.bodyText,\n                            updatedAt: data.updatedAt.toDate(),\n                        });\n                    });\n                setMemos(userMemos);\n                setLoading(false);\n            }, (error) => {\n                console.log(error);\n                setLoading(false);\n                Alert.alert('データの読み込みに失敗しました。');\n            });\n        }\n        return unsubscribe;\n    }, []);\n    \n    return (\n        <View style={styles.container}>\n            <Loading isLoading={isLoading} />\n            <View style={{height: '15%'}}>\n                <Datetime style={styles.dateTime} />\n            </View>\n            <View style={{height: '7%'}}>\n                <View style={styles.tableTitle}>\n                    <TableTitle title = '時間' />\n                    <TableTitle title = '種類' />\n                    <TableTitle title = '記録' />\n                    <TableTitle title = 'メモ' />\n                    <TableTitle title = {'修正\\n確認'} />\n                </View>\n            </View>\n            <View style={{height: '53%'}}>\n                <CreateData memos={memos} />\n            </View>\n            <View style={styles.footer}>\n                <View style={styles.advertisement}>\n                    <Image style={{width: '95%', height: '100%'}}\n                        resizeMode='contain'\n                        source={require('../img/IMG_2417.jpg')}\n                    />\n                </View>\n                <View style={styles.menu}>\n                    <TouchableOpacity style={styles.MonthButton} onPress={() => { navigation.navigate('BabyMonth'); }}>\n                        <Text style={styles.MonthButtonText}>\n                            月表示\n                        </Text>\n                    </TouchableOpacity>\n                </View>\n            </View>\n            <CircleButton\n                name=\"plus\"\n                onPress={() => { navigation.navigate('Create'); }}\n            />\n\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: '#F0F4F8',\n    },\n    footer: {\n        height:'25%',\n        width:'100%',\n        position:'absolute',\n        bottom: 0,\n        borderTopWidth: 1,\n        borderTopColor : 'rgba(0, 0, 0, 100)',\n        //paddingBottom: 50,\n    },\n    dateTime: {\n        //backgroundColor: '#ffffff',\n        //flexDirection: 'row',\n        //paddingVertical: 16,\n        //justifyContent: 'center',\n        //borderTopWidth: 0.5,\n        //borderBottomWidth: 0.5,\n        //borderTopColor : 'rgba(0, 0, 0, 100)',\n        //borderBottomColor: 'rgba(0, 0, 0, 100)',\n        //height: 50,\n        //marginBottom:1,\n        //marginBottom:1,\n        textAlign: 'center',\n        justifyContent: 'center',\n        alignItems: 'center',\n        //position: 'absolute',\n        marginTop: 'auto',\n        marginBottom: 'auto',\n        //fontSize: 30,\n    },\n    tableTitle: {\n        flexDirection: 'row',\n    },\n    advertisement: {\n        height: '40%',\n        //width: '50%',\n        alignItems:'center',\n        backgroundColor: '#ffffff',\n    },\n    menu: {\n        height: '60%',\n        backgroundColor: '#ffffff',\n    },\n    MonthButtonText: {\n        //width: '40%',\n        //marginTop: '5%',\n        //marginLeft: '5%',\n        //padding: 5,\n        fontSize: 20,\n        //textAlign: 'center',\n    },\n    MonthButton: {\n        backgroundColor: '#FFDB59',\n        width: 100,\n        height: 44,\n        borderRadius: 12,\n        justifyContent: 'center',\n        alignItems: 'center',\n        position: 'absolute',\n        left: 20,\n        bottom: 50,\n        shadowColor: '#000000',//ios\n        shadowOffset: { width: 0, height: 8 },//ios\n        shadowOpacity: 0.25,//ios\n        shadowRadius: 8,//ios\n        elevation: 8,//Android\n    },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}